<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>iframe实现预览代码效果</title>
</head>

<body>
    
    <p>
        设计技术内容：iframe 、Blob、URL.createObjectURL
    </p>
    <p>预览的代码来自codepen的 <a href="https://codepen.io/josephrexme/pen/EvLyoR">LoveClipse</a></p>
    <br>
    <button onClick="preview2()">点击预览代码</button> <br><br>
    <div class="code" style="height:800px;width:700px;overflow-y:scroll;border:2px dashed rgb(54, 93, 221)">
        <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">    </span><span class="tag">&lt;style&gt;</span></code></li><li class="L1"><code><span class="pln">                html </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">  </span><span class="pun">--</span><span class="pln">timing</span><span class="pun">:</span><span class="pln"> </span><span class="lit">6s</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">  height</span><span class="pun">:</span><span class="pln"> </span><span class="lit">100vh</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pun">}</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">body </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">  height</span><span class="pun">:</span><span class="pln"> inherit</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">  display</span><span class="pun">:</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ms</span><span class="pun">-</span><span class="pln">grid</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pln">  display</span><span class="pun">:</span><span class="pln"> grid</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">  </span><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">animation</span><span class="pun">:</span><span class="pln"> atmosphere </span><span class="kwd">var</span><span class="pun">(--</span><span class="pln">timing</span><span class="pun">)</span><span class="pln"> linear infinite</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln">          animation</span><span class="pun">:</span><span class="pln"> atmosphere </span><span class="kwd">var</span><span class="pun">(--</span><span class="pln">timing</span><span class="pun">)</span><span class="pln"> linear infinite</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pun">}</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pun">.</span><span class="pln">container </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">  position</span><span class="pun">:</span><span class="pln"> relative</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pln">  margin</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">auto</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pun">}</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pun">.</span><span class="pln">love </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">  position</span><span class="pun">:</span><span class="pln"> relative</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln">  width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">200px</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">  height</span><span class="pun">:</span><span class="pln"> </span><span class="lit">180px</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pun">}</span></code></li><li class="L4"><code><span class="pun">.</span><span class="pln">love</span><span class="pun">::</span><span class="pln">before</span><span class="pun">,</span><span class="pln"> </span><span class="pun">.</span><span class="pln">love</span><span class="pun">::</span><span class="pln">after </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">  content</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pln">  position</span><span class="pun">:</span><span class="pln"> absolute</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">  top</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">  width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">100px</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pln">  height</span><span class="pun">:</span><span class="pln"> </span><span class="lit">150px</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">  background</span><span class="pun">:</span><span class="pln"> black</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln">  border</span><span class="pun">-</span><span class="pln">radius</span><span class="pun">:</span><span class="pln"> </span><span class="lit">50px</span><span class="pln"> </span><span class="lit">50px</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pun">}</span></code></li><li class="L3"><code><span class="pun">.</span><span class="pln">love</span><span class="pun">::</span><span class="pln">before </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">  left</span><span class="pun">:</span><span class="pln"> </span><span class="lit">32px</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">  </span><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">transform</span><span class="pun">:</span><span class="pln"> rotate</span><span class="pun">(-</span><span class="lit">45deg</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pln">          transform</span><span class="pun">:</span><span class="pln"> rotate</span><span class="pun">(-</span><span class="lit">45deg</span><span class="pun">);</span></code></li><li class="L7"><code><span class="pun">}</span></code></li><li class="L8"><code><span class="pun">.</span><span class="pln">love</span><span class="pun">::</span><span class="pln">after </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">  left</span><span class="pun">:</span><span class="pln"> </span><span class="lit">68px</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">  </span><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">transform</span><span class="pun">:</span><span class="pln"> rotate</span><span class="pun">(</span><span class="lit">45deg</span><span class="pun">);</span></code></li><li class="L1"><code><span class="pln">          transform</span><span class="pun">:</span><span class="pln"> rotate</span><span class="pun">(</span><span class="lit">45deg</span><span class="pun">);</span></code></li><li class="L2"><code><span class="pun">}</span></code></li><li class="L3"><code><span class="pun">.</span><span class="pln">love</span><span class="pun">:</span><span class="pln">first</span><span class="pun">-</span><span class="pln">of</span><span class="pun">-</span><span class="pln">type</span><span class="pun">::</span><span class="pln">after</span><span class="pun">,</span><span class="pln"> </span><span class="pun">.</span><span class="pln">love</span><span class="pun">:</span><span class="pln">first</span><span class="pun">-</span><span class="pln">of</span><span class="pun">-</span><span class="pln">type</span><span class="pun">::</span><span class="pln">before </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">  background</span><span class="pun">:</span><span class="pln"> </span><span class="com">#ffdd1a;</span></code></li><li class="L5"><code><span class="pun">}</span></code></li><li class="L6"><code><span class="pun">.</span><span class="pln">love</span><span class="pun">:</span><span class="kwd">last</span><span class="pun">-</span><span class="pln">of</span><span class="pun">-</span><span class="pln">type </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">  position</span><span class="pun">:</span><span class="pln"> absolute</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">  top</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pln">  right</span><span class="pun">:</span><span class="pln"> </span><span class="pun">-</span><span class="lit">200px</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">  </span><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">animation</span><span class="pun">:</span><span class="pln"> intercept </span><span class="kwd">var</span><span class="pun">(--</span><span class="pln">timing</span><span class="pun">)</span><span class="pln"> linear infinite</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln">          animation</span><span class="pun">:</span><span class="pln"> intercept </span><span class="kwd">var</span><span class="pun">(--</span><span class="pln">timing</span><span class="pun">)</span><span class="pln"> linear infinite</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pun">}</span></code></li><li class="L3"><code><span class="pun">.</span><span class="pln">love</span><span class="pun">:</span><span class="kwd">last</span><span class="pun">-</span><span class="pln">of</span><span class="pun">-</span><span class="pln">type</span><span class="pun">::</span><span class="pln">after</span><span class="pun">,</span><span class="pln"> </span><span class="pun">.</span><span class="pln">love</span><span class="pun">:</span><span class="kwd">last</span><span class="pun">-</span><span class="pln">of</span><span class="pun">-</span><span class="pln">type</span><span class="pun">::</span><span class="pln">before </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">  </span><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">animation</span><span class="pun">:</span><span class="pln"> atmosphere </span><span class="kwd">var</span><span class="pun">(--</span><span class="pln">timing</span><span class="pun">)</span><span class="pln"> linear infinite</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">          animation</span><span class="pun">:</span><span class="pln"> atmosphere </span><span class="kwd">var</span><span class="pun">(--</span><span class="pln">timing</span><span class="pun">)</span><span class="pln"> linear infinite</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pun">}</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pun">@-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">keyframes intercept </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">  </span><span class="lit">100</span><span class="pun">%</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">transform</span><span class="pun">:</span><span class="pln"> translate</span><span class="pun">(-</span><span class="lit">400px</span><span class="pun">);</span></code></li><li class="L1"><code><span class="pln">            transform</span><span class="pun">:</span><span class="pln"> translate</span><span class="pun">(-</span><span class="lit">400px</span><span class="pun">);</span></code></li><li class="L2"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L3"><code><span class="pun">}</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="lit">@keyframes</span><span class="pln"> intercept </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">  </span><span class="lit">100</span><span class="pun">%</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">    </span><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">transform</span><span class="pun">:</span><span class="pln"> translate</span><span class="pun">(-</span><span class="lit">400px</span><span class="pun">);</span></code></li><li class="L8"><code><span class="pln">            transform</span><span class="pun">:</span><span class="pln"> translate</span><span class="pun">(-</span><span class="lit">400px</span><span class="pun">);</span></code></li><li class="L9"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L0"><code><span class="pun">}</span></code></li><li class="L1"><code><span class="pun">@-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">keyframes atmosphere </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">  </span><span class="lit">0</span><span class="pun">%</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">    background</span><span class="pun">:</span><span class="pln"> skyblue</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L5"><code><span class="pln">  </span><span class="lit">50</span><span class="pun">%</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">    background</span><span class="pun">:</span><span class="pln"> black</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">  </span><span class="lit">100</span><span class="pun">%</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">    background</span><span class="pun">:</span><span class="pln"> skyblue</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L1"><code><span class="pun">}</span></code></li><li class="L2"><code><span class="lit">@keyframes</span><span class="pln"> atmosphere </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">  </span><span class="lit">0</span><span class="pun">%</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">    background</span><span class="pun">:</span><span class="pln"> skyblue</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pln">  </span><span class="lit">50</span><span class="pun">%</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">    background</span><span class="pun">:</span><span class="pln"> black</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L9"><code><span class="pln">  </span><span class="lit">100</span><span class="pun">%</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">    background</span><span class="pun">:</span><span class="pln"> skyblue</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L2"><code><span class="pun">}</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">                </span><span class="tag">&lt;/style&gt;</span></code></li><li class="L5"><code><span class="pln">                </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"container"</span><span class="tag">&gt;</span></code></li><li class="L6"><code><span class="pln">                    </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"love"</span><span class="tag">&gt;</span></code></li><li class="L7"><code><span class="pln">                    </span><span class="tag">&lt;/div&gt;</span></code></li><li class="L8"><code><span class="pln">                    </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"love"</span><span class="tag">&gt;</span></code></li><li class="L9"><code><span class="pln">                    </span><span class="tag">&lt;/div&gt;</span></code></li><li class="L0"><code><span class="pln">                </span><span class="tag">&lt;/div&gt;</span></code></li></ol></pre>
    </div>

    <script>
        function preview2() {
            // 网页源码
            var html = '<style>html{--timing:6s;height:100vh}body{height:inherit;display:-ms-grid;display:grid;-webkit-animation:atmosphere var(--timing) linear infinite;animation:atmosphere var(--timing) linear infinite}.container{position:relative;margin:auto}.love{position:relative;width:200px;height:180px}.love::before,.love::after{content:\'\';position:absolute;top:0;width:100px;height:150px;background:#000;border-radius:50px 50px 0 0}.love::before{left:32px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.love::after{left:68px;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.love:first-of-type::after,.love:first-of-type::before{background:#ffdd1a}.love:last-of-type{position:absolute;top:0;right:-200px;-webkit-animation:intercept var(--timing) linear infinite;animation:intercept var(--timing) linear infinite}.love:last-of-type::after,.love:last-of-type::before{-webkit-animation:atmosphere var(--timing) linear infinite;animation:atmosphere var(--timing) linear infinite}@-webkit-keyframes intercept{100%{-webkit-transform:translate(-400px);transform:translate(-400px)}}@keyframes intercept{100%{-webkit-transform:translate(-400px);transform:translate(-400px)}}@-webkit-keyframes atmosphere{0%{background:#87ceeb}50%{background:#000}100%{background:#87ceeb}}@keyframes atmosphere{0%{background:#87ceeb}50%{background:#000}100%{background:#87ceeb}}</style><div class="container"><div class="love"></div><div class="love"></div></div>';
            var body = document.querySelector('body');
            // 创建iframe
            var frame = document.createElement('iframe');
            // 设置iframe样式
            frame.style = "width:600px;max-width:98%;max-height:600px;height:98vh;position:fixed;border:1px solid;outline:9999px solid rgba(0,0,0,.6);top:0;right:0;left:0;bottom:0;margin:auto;overflow:hidden;";
            // 通过Blob 将html代码转换为blob格式
            var blob = new Blob([html], {
                type: 'text/html' // 格式要注明为'text/html' ，否则代码不会执行
            });
            // 通过 createObjectURL 方法，将blob对象转为URL赋值给iframe src属性
            frame.src = URL.createObjectURL(blob);

            body.appendChild(frame);
        }

    </script>
</body>

</html>